@if (loading) {
<nz-skeleton [nzLoading]="true"></nz-skeleton>
<nz-skeleton [nzLoading]="true"></nz-skeleton>
<nz-skeleton [nzLoading]="true"></nz-skeleton>
<nz-skeleton [nzLoading]="true"></nz-skeleton>
} @else {
<div class="form-container">
  <form [formGroup]="patientForm" class="patient-form">
    <h2>Patient</h2>
    <nz-form-item>
      <nz-form-control nzErrorTip="Hospital number is required">
        <nz-form-label nzRequired>Hospital number</nz-form-label>
        <input
          nz-input
          formControlName="hospitalNumber"
          placeholder="Enter hospital number"
        />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control nzErrorTip="Name is required">
        <nz-form-label nzRequired>Name</nz-form-label>
        <input nz-input formControlName="name" placeholder="Enter name" />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control nzErrorTip="Surname is required">
        <nz-form-label nzRequired>Surname</nz-form-label>
        <input nz-input formControlName="surname" placeholder="Enter surname" />
      </nz-form-control>
    </nz-form-item>

    <div nz-row [nzGutter]="10">
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-control nzErrorTip="Date of birth is required">
            <nz-form-label nzRequired>Date of birth</nz-form-label>
            <nz-date-picker
              style="width: 100%"
              formControlName="dateOfBirth"
              nzFormat="yyyy-MM-dd"
              [nzDisabledDate]="disableDate"
            ></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </div>

      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-control nzErrorTip="Date of admission is required">
            <nz-form-label nzRequired>Date of admission</nz-form-label>
            <nz-date-picker
              style="width: 100%"
              formControlName="dateOfAdmission"
              nzFormat="yyyy-MM-dd"
              [nzDisabledDate]="disableDate"
            ></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>

    <nz-form-item>
      <nz-form-control nzErrorTip="Age is required">
        <nz-form-label nzRequired>Age on admission</nz-form-label>
        <input
          nz-input
          type="number"
          formControlName="ageOnAdmission"
          placeholder="Enter age on admission"
        />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control nzErrorTip="Birth weight is required">
        <nz-form-label nzRequired>Birth weight (g)</nz-form-label>
        <input
          nz-input
          type="number"
          formControlName="birthWeight"
          placeholder="Enter birth weight in grams"
        />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control>
        <nz-form-label>Gestational age (weeks)</nz-form-label>
        <input
          nz-input
          type="number"
          formControlName="gestationalAge"
          placeholder="Enter gestational age"
        />
      </nz-form-control>
    </nz-form-item>

    <div nz-row [nzGutter]="12">
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-control nzErrorTip="Gender is required">
            <nz-form-label nzRequired>Gender</nz-form-label>
            <nz-select formControlName="gender" nzPlaceHolder="Select gender">
              <nz-option
                *ngFor="let option of genderOptions"
                [nzValue]="option.value"
                [nzLabel]="option.label"
              ></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>

      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-control nzErrorTip="Place of birth is required">
            <nz-form-label nzRequired>Place of birth</nz-form-label>
            <nz-select
              formControlName="placeOfBirth"
              nzPlaceHolder="Select place of birth"
            >
              <nz-option
                *ngFor="let option of placeOfBirthOptions"
                [nzValue]="option.value"
                [nzLabel]="option.label"
              ></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>

    <nz-form-item>
      <nz-form-control nzErrorTip="Mode of delivery is required">
        <nz-form-label nzRequired>Mode of delivery</nz-form-label>
        <nz-select
          formControlName="modeOfDelivery"
          nzPlaceHolder="Select mode of delivery"
        >
          <nz-option
            *ngFor="let option of modeOfDeliveryOptions"
            [nzValue]="option.value"
            [nzLabel]="option.label"
          ></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control>
        <nz-form-label>Initial resuscitation in delivery room</nz-form-label>
        <nz-select
          formControlName="initialResuscitation"
          nzPlaceHolder="Select resuscitation methods"
          nzMode="multiple"
        >
          <nz-option
            *ngFor="let option of resuscitationOptions"
            [nzValue]="option.value"
            [nzLabel]="option.label"
          ></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control>
        <nz-form-label>Apgar score at Birth</nz-form-label>
        <nz-select
          formControlName="apgarTimes"
          nzPlaceHolder="Select Apgar times"
          nzMode="multiple"
        >
          <nz-option
            *ngFor="let option of apgarTimeOptions"
            [nzValue]="option.value"
            [nzLabel]="option.label"
          ></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control nzErrorTip="Outcome status is required">
        <nz-form-label nzRequired>Outcome status</nz-form-label>
        <nz-select
          formControlName="outcomeStatus"
          nzPlaceHolder="Select outcome status"
        >
          <nz-option
            *ngFor="let option of outcomeStatusOptions"
            [nzValue]="option.value"
            [nzLabel]="option.label"
          ></nz-option>
        </nz-select>
        <nz-select
          class="mt-3"
          *ngIf="outcomeStatus === 'Transferred to another hospital'"
          formControlName="transferHospital"
          nzPlaceHolder="Select hospital"
        >
          <nz-option
            *ngFor="let hospital of hospitalList"
            [nzValue]="hospital"
            [nzLabel]="hospital"
          ></nz-option>
        </nz-select>
        <div class="mt-3" *ngIf="outcomeStatus === 'Died'">
          <button nz-button nzType="default" (click)="openPpipForm()">
            Open PPIP Form
          </button>
        </div>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control nzErrorTip="Birth HIV PCR is required">
        <nz-form-label nzRequired>Birth HIV PCR</nz-form-label>
        <nz-select
          formControlName="birthHivPcr"
          nzPlaceHolder="Select birth HIV PCR"
        >
          <nz-option
            *ngFor="let option of birthHivPcrOptions"
            [nzValue]="option.value"
            [nzLabel]="option.label"
          ></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control>
        <nz-form-label>Head circumference at birth (cm)</nz-form-label>
        <input
          nz-input
          type="number"
          formControlName="headCircumference"
          placeholder="Enter head circumference"
        />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control>
        <nz-form-label>Foot length at birth (cm)</nz-form-label>
        <input
          nz-input
          type="number"
          formControlName="footLength"
          placeholder="Enter foot length"
        />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control>
        <nz-form-label>Length / height at birth (cm)</nz-form-label>
        <input
          nz-input
          type="number"
          formControlName="lengthAtBirth"
          placeholder="Enter length/height at birth"
        />
      </nz-form-control>
    </nz-form-item>

    <div nz-row [nzGutter]="12">
      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-control nzErrorTip="Required">
            <nz-form-label nzRequired>Died in delivery room</nz-form-label>
            <nz-select
              formControlName="diedInDeliveryRoom"
              nzPlaceHolder="Select"
            >
              <nz-option
                *ngFor="let option of diedInDeliveryRoomOptions"
                [nzValue]="option.value"
                [nzLabel]="option.label"
              ></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>

      <div nz-col [nzSpan]="12">
        <nz-form-item>
          <nz-form-control nzErrorTip="Required">
            <nz-form-label nzRequired
              >Died within first 12 hours of admission</nz-form-label
            >
            <nz-select
              formControlName="diedWithin12Hours"
              nzPlaceHolder="Select"
            >
              <nz-option
                *ngFor="let option of diedIn12Hours"
                [nzValue]="option.value"
                [nzLabel]="option.label"
              ></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>

    <nz-form-item>
      <nz-form-control>
        <nz-form-label>Initial temperature in first hour</nz-form-label>
        <input
          nz-input
          formControlName="initialTemperature"
          placeholder="Enter initial temperature"
        />
      </nz-form-control>
    </nz-form-item>

    <div style="text-align: right; margin-top: 24px">
      <button
        [nzLoading]="btnLoading"
        (click)="onSubmit()"
        nz-button
        nzType="primary"
        [disabled]="patientForm.invalid"
      >
        Next (1/3)
      </button>
    </div>
  </form>
</div>
}
